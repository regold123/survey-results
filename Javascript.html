<script>


function chooseCity(values){

  for(var i = 0; i < values.length; i++) {
    var opt = values[i];
    var el = $("<option/>").append(opt).val(opt);
    $("#city").append(el);
  }
}

google.script.run.withSuccessHandler(chooseCity)
.getCities();


function chooseMikveh(mikvaot){

  $('#address').empty();

  var thisCityMikvaot = mikvaot[$("#city option:selected").text()];  

  if (thisCityMikvaot == null) { 
    var el1 = $("<option/>").append("Choose a mikveh").val("default");  
    $('#address').append(el1)
  } else {
  for(var i = 0; i < thisCityMikvaot.length; i++) {
    var opt = thisCityMikvaot[i];
    var optClass = $("#city option:selected").text();
    var el = $("<option/>").append(opt).val(opt).addClass(optClass);    
    $('#address').append(el);
  } }
}



//Generate Table with Results
document.addEventListener("DOMContentLoaded",function() {
    google.script.run.withSuccessHandler(generateTable).getTableData();
});

function generateTable(dataArray) {
  
      var tbody = document.getElementById("table-body");
   
      dataArray.forEach(function(r){
  
      var row = document.createElement("tr");
      var col1 = document.createElement("td");
      col1.textContent = r[0];
      var col2 = document.createElement("td");
      col2.textContent = r[1];
      var col3 = document.createElement("td");
      col3.textContent = r[2];
      var col4 = document.createElement("td");
      col4.textContent = r[3];
      var col5 = document.createElement("td");
      col5.textContent = r[4];
      var col6 = document.createElement("td");
      col6.textContent = r[5];
      var col7 = document.createElement("td");
      col7.textContent = r[6];
      var col8 = document.createElement("td");
      col8.textContent = r[7];
      var col9 = document.createElement("td");
      col9.textContent = r[8];
      var col10 = document.createElement("td");
      col10.textContent = r[9];
      var col11 = document.createElement("td");
      col11.textContent = r[10];
      var col12 = document.createElement("td");
      col12.textContent = r[11];    
      var col13 = document.createElement("td");
      col13.textContent = r[12];    
      row.appendChild(col1);
      row.appendChild(col2);
      row.appendChild(col3);
      row.appendChild(col4);
      row.appendChild(col5);
      row.appendChild(col6);
      row.appendChild(col7);
      row.appendChild(col8);
      row.appendChild(col9);
      row.appendChild(col10);
      row.appendChild(col11);
      row.appendChild(col12);
      row.appendChild(col13);   
      tbody.appendChild(row);
      
      var tdCheck = document.getElementById('td')
      if (tdCheck = ""){
      tdCheck.value = "&nbsp;"

    } 
    
   }) ;
   tbody.style = "display: hidden";
}




$(document).ready(function(){
  $("#address").on("click", function() {
    var value = $(this).val().toLowerCase();
    $("#table-body tr").filter(function() {
      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
    });
  });
});


$(document).ready(function(){
  $("#myWord").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    $("#table-body tr").filter(function() {
      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
    });
  });
});




</script>
